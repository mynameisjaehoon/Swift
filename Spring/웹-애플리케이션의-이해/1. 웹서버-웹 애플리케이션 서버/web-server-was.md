# 웹서버, 웹 애플리케이션 서버

- 웹이라는 것은 전부 HTTP 기반 웹 브라우저에서 URL을 입력하면 인터넷을 통해 서버에 접근.
- 서버에서는 결과물을 HTTP 응답으로 클라이언트에게 전달
- 이때 HTTP 라는 프로토콜을 기반으로 동작한다.

HTML, text, 이미지, 음성, 영상, 파일, json, xml등 모든 형태의 데이터가 모두 HTTP 프로토콜로 전달된다.

## 웹 서버(Web Server)

웹 서버라는 것은 HTTP기반으로 동작하는 서버이다. 정적리소스와 부가 기능들을 제공한다. 정적리소스는 서버가 요청이왔을때 바로 넘겨주는 데이터들을 말한다 대표적으로 NGINX, APACHE라는 웹 서버가 있다.

## 웹 애플리케이션 서버(WAS)

- HTTP 기반으로 동작한다.
- 웹 서버의 기능을 대부분 포함하고 있다.
- 정적인 파일을 serving하는 웹서버와는 다르게 프로그램 코드를 실행해서 애플리케이션 로직을 수행하고 동적인 HTML을 생성할 수 있습니다.
    - 동적 HTML, HTTP API(JSON)
    - 서블릿, JSP, 스프링 MVC
- 톰캣, Jetty, Undertow 등

## 웹 서버와 웹 애플리케이션 서버의 차이

- **웹 서버는 정적 리소스(파일), WAS는 애플리케이션 로직을 제공**
- 사실 둘의 용어도 경계도 모호하다.
    - 따라서 웹 서버도 프로그램을 실행하는 기능을 포함하기도 한다.
    - 웹 애플리케이션 서버도 웹 서버의 기능을 제공한다.
- 그렇다면 어떻게 구분해야할까? 자바의 경우에는 서블릿 컨테이너 기능을 제공하면 WAS라고 부른다.
    - 하지만 이 기준도 서블릿 없이 자바코드를 실행하는 서버 프레임워크도 있어서 애매하다.
- WAS는 애플리케이션 로직을 실행하는데 특화되어 있다.

## 웹 시스템 구성

### WAS, DB

![Untitled](%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5,%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%8B%E1%85%A2%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8F%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%A7%E1%86%AB%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20f90447b30c8942649dde1dbda1eba862/Untitled.png)

웹 시스템의 가장 간단한 구성을 보면 WAS와 DB만으로 구성할 수 있다.

클라이언트 요청이 오면 애플리케이션 로직을 실행하며 정적인 데이터를 제공할 수도 있고 애플리케이션 로직에서 DB를 조회해서 동적인 데이터를 만들어낼 수도 있다. 하지만 WAS가 너무나 많은 일을 담당하고 있다. WAS가 무거워지면 다음과 같은 문제들이 발생할 수 있다.

- WAS가 너무 많은 역할을 담당하면서 서버가 과부하 될 수 있다.
- 가장 비싼 애플리케이션 로직이 정적 리소스 때문에 수행이 어려울 수 있다.
- **WAS에 장애가 발생하면 웹 브라우저가 접근조차할 수 없고, 오류화면 조차도 노출이 불가능해진다.**

### WEB, WAS, DB

![Untitled](%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5,%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%8B%E1%85%A2%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8F%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%A7%E1%86%AB%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20f90447b30c8942649dde1dbda1eba862/Untitled%201.png)

- 정적리소스는 웹서버가 처리
- 웹서브는 애플리케이션 로직같은 동적인 처리가 필요하면 WAS에 요청을 위임한다.
- WAS는 중요한 애플리케이션 로직에만 전담할 수 있다는 장점이 있다.
- 시스템 리소스를 효과적으로 사용할 수 있다.
    - 정적인 리소스만 필요하다면 웹서버만 추가하면 된다.

정적리소스만 제공하는 웹 서버는 잘 죽지 않는다. 프로그램 로직도 필요없이 파일만 제공하면 된다. 그런데 WAS는 잘 죽는다. WAS에서 응답이 잘 되지 않을 때 웹 서버에서 오류화면 HTML을 뿌리도록 설정할 수 있다.