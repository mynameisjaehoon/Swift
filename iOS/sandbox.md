# 샌드박스 모델

## 샌드박스 모델이란?
샌드박스(Sandbox)란 직역하면 모래통 이라는 의미이다. 어린아이가 다치지 않도록 모래 박스 안에서만 놀도록 하는데서 유래된 보안 모델이다.
iOS는 기본적으로 앱마다 별도의 파일을 생성해서 공유되지 않도록 하고 외부로부터 들어온 접근에 대해 보호되는 영역으로 시스템이 부정적으로 조작되는 것을 막는 보안 형태를 가지고 있다. 

아래의 그림은 샌드박스가 있을 때와 없을 때의 차이를 보여준다.

<img width="800" src="https://user-images.githubusercontent.com/76734067/209707623-79dccd7d-1953-4fd5-acf9-915e942d9292.png">

앱이 샌드박스화 되지 않는 다면 앱이 실행하는 사용자의 모든 권한을 가지게 되고, 사용자가 접근할 수 있는 모든 리소스에 앱도 접근이 가능하다. 이럴 때는 앱이나 연결된 프레임워크에 보안적인 결함이 있을 때 공격자가 앱을 제어하기 위해서 이러한 취약점을 악용하면서 사용자가 할 수 있는 모든것을 공격자도 할 수 있게 되는것이다. 앱을 샌드박스화 함으로써 이러한 보안 문제를 방지할 수 있다.
<br>
하나의 앱은 하나의 샌드박스에서만 놀수 있게 하면 되는 것이다. iOS의 앱은 이러한 이유로 모두 SandBox화 되어있다.

다시말하면, **`샌드박스`는 파일, 환경설정, 네트워크 리소스, 하드웨어 등에 대한 앱의 접근을 제한하는 세분화된 제어 집합, 커널 수준에서 시행되는 접근제어 기술**이라고 볼 수 있다. 

이렇게 데이터를 분리하고 고립시키고, 위에서 말한 보안 침해의 가능성을 낮출 수 있다.

애플의 샌드박스 전략은 두가지로, 다음과 같다.
1. 앱의 샌드박스를 사용하면 앱이 시스템과 상호작용하는 방식을 설명할 수 있다. 시스템에서 작업을 완료하는데 필요한 접근권한을 앱에 부여한다.
2. 앱 샌드박스를 사용하면 열기 및 저장, 드래그 앤 드롭 등 친숙한 사용자 상호작용을 통해 앱에 투명하게 추가 접근권한을 부여할 수 있다. 

<img width="600" src="https://user-images.githubusercontent.com/76734067/209708962-8a4e5a26-0fe8-4de8-8a14-50b9e5b6adea.png">

- 위와 같이 샌드박스화 하면 하나의 앱은 그 앱안에 있는 데이터 이외에는 접근할 수 없다.
- 하지만 사용자의 데이터는 앱의 외부에 있다.
- 이런 외부에 있는 사진, 연락처 등의 앱 외부의 데이터를 **`접근권한`** 을 사용자가 명시적으로 허용했을 때 최소한으로 접근할 수 있도록 하는 구조이다.

요약하면 다음과 같다.
- 샌드박스는 앱의 외부 데이터에 대한 접근을 제한하는 보안 모델이다.
- **`되새김`** 앱을 개발하면서 사용자의 데이터에 접근할 때 접근권한허용 메세지를 띄우지 않아서 리젝을 먹은 적이 있었다. 귀찮게 뭐하러 메세지를 띄우나 생각했었는데 이런 중요한 보안문제가 있다는 것을 알고나니 반성하게 되었다...