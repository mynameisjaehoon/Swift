# 시스템 콜
- 시스템콜은 운영체제에서 제공하는 서비스를 이용하기 위한 프로그래밍 인터페이스이다.
- 시스템 콜의 유형으로는 프로세스 제어, 파일조작, 장치조작, 정보 유지보수, 통신과 보호 등으로 나눌 수 있다.
- 사용자 모드에서는 애플리케이션 코드가 사용되고, 접근할 수 있는 영역에 제한이 있기 때문에 해당 모드에서는 하드웨어(디스크, I/O등)에 직접적으로 접근할 수 없습니다. 접근을 위해서 시스템 콜을 사용하게 됩니다.
- 사용되는 시스템 콜의 예시는 다음이 있습니다.
    - fork(): 자식 프로세스 생성
    - exec(): 자신을 수행가능한 다른 프로세스로 대치
    - wait(): 프로세스 종료시까지 대기
    - 이 외에도 pipe, signal, exit, open, create, close, read, write등이 있다.


## 시스템콜의 실행 과정

<img width="70%" src="https://user-images.githubusercontent.com/76734067/212707431-a854e8df-61a1-41cf-90cb-335dbc190c3b.png">

1. 라이브러리 함수(예: printf)를 호출한다.
2. 라이브러리 함수 내부에서 시스템 콜(write)를 호출한다.
3. 시스템 콜의 인덱스를 CPU레지스터에 저장한다.
4. 0x80 인터럽트를 발생시킨다.(커널모드로 전환)
5. IDT(Interrupt Descriptor Table)을 참조하여 system_call()을 호출한다.
6. 이때 `3`에서 저장한 인덱스를 system_call()함수 내에 저장한다.
7. sys_call_table을 참조해 해당 인덱스에 맞는 기능(sys_write)을 호출한다.
8. 수행이 모두 끝나면 사용자 모드로 전환한다.

## 시스템 콜의 유형
시스템콜은 위에서도 설명했듯이 다음 6가지 유형이 있다.
- 프로세스 제어
- 파일 조작
- 디바이스 조작
- 정보관리
- 커뮤니케이션
- 보안