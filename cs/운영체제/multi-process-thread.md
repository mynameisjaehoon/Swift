# 멀티 프로세스보다 멀티 스레드!
멀티 프로세스는 프로그램을 여러개 켜는 것이고, 멀티 스레드는 하나의 프로그램에서 여러 작업을 해결하는 것이다.<br>
멀티 스레드의 장점에 대해서 알아보자
- 자원의 효율성이 증가된다.
    - 멀티 프로세스로 작업하던 작업을 멀티 스레드로 작업할 경우 생성해야하는 프로세스 자원과 시스템콜이 줄어들기 때문에 자원을 효율적으로 관리할 수 있다.
    - 프로세스간의 Context Switching시에 CPU, 레지스터의 교환 뿐만 아니라 RAM과 CPU 사이의 캐시메모리까지 초기화해야하기 때문에 오버헤드가 크기 때문이다.
- 처리비용, 응답시간의 단축
    - 또한 프로세스 간의 통신(IPC)보다 스레드간의 통신의 비용이 싸게 먹히기 때문에 작업들 간의 통신의 부담이 줄어든다.
        - 스레드는 Stack을 제외한 영역의 메모리를 공유하기 때문이다.
    - 프로세스간에 전환하는 속도보다 스레드간에 전환하는 속도가 더 빠르다.
        - Context Switching시에 스레드는 Stack 영역만 처리하기 때문이다.
- 하지만 멀티 스레드를 사용하게 되면 **동기화 문제**를 주의해야한다.
- 스레드간의 자원공유는 전역변수(데이터 세그먼트)를 이용하므로 상용할 때 충돌이 발생할 수도 있다.
- Thread Safe
    - 멀티스레드 환경에서 여러 스레드가 동시에 같은 공유자원에 접근할 때 의도한 대로 동작하는 것을 말한다.
    - Thread Safe 하게 구현하기 위해서는 공유자원에 접근하는 ciritical section을 동기화 기법으로 제어해주어야한다.
    - 동기화 기법으로는 Mutext나 Semaphore가 있다.
    - Reentrant
        - 어떤 함수가 Reentrant하다는 것은 여러스레드가 동시에 접근해도 항상 같은 실행결과를 보장한다는 의미이다.
        - 이를 만족하기 위해서 해당 서브루틴에서 공유자원을 사용하지 않으면 된다.
            - 정적(전역)변수를 사용하거나 반환하지 않고 함수 호출시에 주어진 매개변수만으로 동작하면 된다.
        - Reentrant하다면 Thread-Safe하지만, Thread-Safe하다고 해서 Reentrant한 것은 아니다.

**정리하면**
- 멀티 스레드
    - 장점
        - 멀티 프로세스보다 적은 메모리 공간을 차지한다.
        - Context Switching이 빠르다
    - 단점
        - 오류로 인해서 하나의 스레드가 종료되면 전체 스레드가 종료될 수 있다는 문제점이 있다.
- 멀티 프로세스
    - 장점
        - 하나의 프로세스가 죽더라도 다른 프로세스에는 영향을 끼치지 않고 정상적으로 수행된다는 장점
    - 단점
        - 멀티스레드보다 많은 메모리 공간과 CPU시간을 차지한다.

대상 시스템에 따라서 적합한 동작방식을 선택해야한다.