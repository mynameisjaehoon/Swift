# 로드밸런싱

로드밸런싱은 트래픽이 많아지면서 1대의 서버로 감당하기 어려워졌을 때 여러 서버를 두고 균등하게 트래픽을 분산시키는 것을 말합니다. 로드밸런서를 클라이언트와 서버 사이에 두고 부하가 일어나지 않다로고 여러 서버에 분산시켜주는 방법입니다.

로드밸런서가 서버를 선택하는 방식에는 다음이 있습니다.
- CPU 스케줄링의 라운드 로빈방식을 활용하는 방법
- Least Connections: 연결개수가 가장 적은 서버를 선택하는 방법입니다. 트래픽으로 인해 세션이 길어지는 경우에 권장됩니다.
- Source: 사용자의 IP를 해싱해서 분배하는 방법이 있습니다. 이 방법은 특정 사용자가 항상 같은 서버로 연결되는 것을 보장합니다.

## 로드밸런서의 장애대비
- 로드밸런서를 이중화해서 장애를 대비할 수 있습니다.
- 이중화된 로드밸런서들이 서로 health check라는 과정을 고칩니다.
- Main Load Balancer가 동작하지 않으면 가상IP(VIP, Virtual IP)는 여분의 로드밸런서로 변경됩니다.
- 여분의 로드밸런서로 운영하게 됩니다. 

# Question
> **L4 로드밸런서와, L7 로드밸런서의 차이에 대해 설명해 주세요.**<br>
> L4 로드밸런싱은 Layer4(TCP/UDP)에서 IP와 Port를 활용하여 서버분산을 하는 것을 의미합니다. 적합한 Virtual Server IP와 Port가 목적지로 들어온다면 골고루 서버에 부하 분산합니다.
> L7 로드밸런싱은 Layer4를 넘어 Layer7프로토콜의 헤더를 분석하여 로드밸런싱을 실시하는 것을 의미합니다. IP와 Port를 이용해서 로드밸런싱을 하는 것은 같으나, Layer7 프로토콜을 통해 사용자 정의 로드밸런싱을 실시하거나
> Layer7 프로토콜 헤더를 조작/활용 할 수 있다는 특징이 있습니다.

> **로드밸런서 알고리즘에 대해 설명해주세요**
> CPU 스케줄링의 라운드 로빈 방식을 활용하거나, 연결개수가 가장 적은 서버를 선택하거나, 사용자의 IP를 해싱해서 분배하는 방법이 있습니다.

> **로드밸런서 장치를 사용하지 않고, DNS를 활용해서 유사하게 로드밸런싱을 하는 방법에 대해 설명해 주세요.**<br>
> DNS 로드밸런싱은 별도의 소프트웨어나 하드웨어 로드밸런싱 장비를 이용하지 않고 DNS를 이용하여 도메인 정보를 조회하는 시점에서 다른IP 정보를 통해 트래픽을 분산하는 기법입니다.
> 라운드 로빈 방식을 통해서 사이트에 접속하는 사용자가 도메인주소를 브라우저에 입력하면 DNS는 도메인에 등록된 여러개의 IP 리스트 중에서 라운드 로빈방식으로 사용자에게 IP를 리턴하여 알려주게 됩니다.
> 하지만 DNS를 이용한 라운드로빈 로드밸런싱은 로드밸런스 전용의 소프트웨어나 하드웨어와 달리 Health Check의 대안기능이 없습니다.